# 粤语词汇朗读笔记 - 功能说明

## 项目概述

这是一款基于 Flutter 开发的粤语词汇朗读笔记应用，主要用于记录生难词汇和句子的发音。所有数据（包括文本和音频）都存储在本地设备上。

## 主要功能

### 1. 记录模式
- **词汇输入**：输入要记录的词汇或句子（必填）
- **备注输入**：可添加释义、例句等备注信息（选填）
- **语音录制**：
  - 长按录音按钮开始录制
  - 松开按钮结束录制
  - 支持无时长限制录音
  - 录音完成后可试听
  - 支持重新录制
- **保存记录**：将词汇、备注和音频一起保存

### 2. 查看模式
- **日期分组显示**：
  - 今天
  - 昨天
  - 本周
  - 本月
  - 更早
- **搜索功能**：实时搜索词汇文本和备注内容
- **列表操作**：
  - 点击记录查看详情
  - 左滑删除记录

### 3. 详情页面
- **查看和编辑**：
  - 查看词汇和备注
  - 点击编辑按钮修改内容
- **音频播放**：
  - 长按播放模式：按住播放，松开暂停（快速回听）
  - 标准播放模式：播放/暂停按钮 + 进度条
  - 播放速度调节：0.5x, 0.75x, 1x, 1.25x, 1.5x
- **重新录制**：可以重新录制音频替换原有录音
- **删除记录**：删除整条记录（包括音频文件）

## 技术特点

### 数据存储
- **存储方式**：纯文件系统
- **存储位置**：应用文档目录 `/yuji_notes/`
- **数据结构**：
  ```
  yuji_notes/
  ├── metadata.json          # 词汇元数据
  └── audios/               # 音频文件目录
      ├── 20250121_001.m4a
      └── ...
  ```

### 音频格式
- **格式**：m4a (AAC 编码)
- **采样率**：44100Hz
- **比特率**：128kbps
- **文件命名**：`YYYYMMDD_序号.m4a`

### 权限要求
- **麦克风权限**：用于录制语音
- **存储权限**：用于保存音频文件

## 使用流程

### 添加新记录
1. 切换到「记录」标签页
2. 输入词汇或句子
3. （可选）输入备注信息
4. 长按录音按钮录制发音
5. 松开按钮结束录音
6. 试听录音，如需重新录制可点击「重新录制」
7. 点击「保存」按钮

### 查看和管理记录
1. 切换到「查看」标签页
2. 浏览按日期分组的记录列表
3. 使用搜索框查找特定记录
4. 点击记录进入详情页
5. 在详情页可以：
   - 编辑词汇和备注
   - 播放音频（两种播放模式）
   - 重新录制音频
   - 删除记录

## 依赖包

主要使用的 Flutter 插件：
- `record: ^5.1.2` - 音频录制
- `just_audio: ^0.9.39` - 音频播放
- `path_provider: ^2.1.4` - 文件路径管理
- `uuid: ^4.5.1` - 生成唯一 ID
- `intl: ^0.19.0` - 日期格式化
- `provider: 6.1.2` - 状态管理
- `permission_handler: 11.3.1` - 权限管理
- `fluttertoast: 8.2.12` - 消息提示

## 文件结构

```
lib/
├── models/
│   └── vocabulary_record.m.dart         # 词汇记录数据模型
├── services/
│   └── vocabulary_service.dart          # 数据服务层
├── provider/
│   └── vocabulary_store.p.dart          # 状态管理
├── components/
│   ├── audio_player/
│   │   └── audio_player_widget.dart     # 音频播放组件
│   └── voice_recorder/
│       └── voice_recorder.dart          # 语音录制组件
└── pages/
    └── vocabulary/
        ├── record_page.dart             # 记录页面
        ├── view_page.dart               # 查看列表页面
        └── detail_page.dart             # 详情页面
```

## 注意事项

1. **首次使用**：首次录音时会请求麦克风权限，请允许权限以正常使用
2. **数据安全**：所有数据存储在本地，不会上传到云端
3. **删除操作**：删除记录会同时删除音频文件，且不可恢复，请谨慎操作
4. **存储空间**：长时间使用会占用一定存储空间，建议定期清理不需要的记录

## 后续扩展功能建议

- [ ] 导出/导入功能（备份和恢复数据）
- [ ] 标签分类系统
- [ ] 统计功能（总词汇数、总时长等）
- [ ] 深色模式支持
- [ ] 云同步功能
- [ ] 分享功能（分享单条记录）

